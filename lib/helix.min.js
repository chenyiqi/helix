!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("helix",[],e):"object"==typeof exports?exports.helix=e():t.helix=e()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}var n=r(1);i(n)},function(t,e){"use strict";function r(t,e,r,i,n){var o=r.data?r.data:r.bind,s=helix.util.getExprFn(o),p=n,a=e.tagName.toLowerCase(),c=o,h=!1;return p&&p.exprMatch==o.match(/[a-z0-9A-Z_]*/g)[0]&&(h=!0),e.setAttribute("expr",c),{$apply:function(){var r=s.call(window,t);"input"==a?e.value=r:e.innerHTML=r},getFn:function(){return s},getExpr:function(){return h&&(c=o.replace(p.exprMatch,p.prefix)),c}}}!function(t,e,i){function n(t,e,r,n){this.$$vm=e,this.$$prefix=r,this.$$expr=r,this.$$model=t,this._push=Array.prototype.push,this._pop=Array.prototype.pop,this._reverse=Array.prototype.reverse,this._shift=Array.prototype.shift,this._unshift=Array.prototype.unshift,this._splice=Array.prototype.splice,this.join=Array.prototype.join,this.concat=Array.prototype.concat,this.notify=function(t){c.publishPropertyChanged(this.$$vm,this.$$expr,t)},this.pop=function(){var t=this.$$model[this.$$model.length-1];return this.splice(this.$$model.length-1,1),t},this.push=function(){var t=this.$$model.length,r=this._push.apply(this.$$model,arguments),i=this;return $.each(arguments,function(e,r){c.defArrayItem(i.$$vm,i.$$expr,t+e,i,i.$$model)}),this.notify({type:"push",param:{oriLen:t,newLen:r,element:arguments},strictExpr:!0}),c.applyVM(e,{}),r},this.reverse=function(){this.$$model.reverse();var t=createSetterExpr(this.$$expr);t.call(this.$$vm,this.$$vm,this.$$model)},this.shift=function(){var t=this.$$model[this.$$model.length-1];return this.splice(0,1),t},this.unshift=function(t){this.splice(0,0,t)},this.removeAll=function(){this.splice(0,this.$$model.length)},this.addAll=function(){this.splice(0,0,obj)},this.item=function(t,e){return e&&this.splice(t,1,e),this[t]},this.size=function(t){return t&&!isNaN(t)&&this.splice(t,this.$$model.length-t),this.$$model.length},this.splice=function(){var t=arguments[0],r=arguments[1];if(r!=i){var n=Array.prototype.slice.call(arguments,2);if(r>0){Array.prototype.splice.call(this,t,r),Array.prototype.splice.call(this.$$model,t,r);var o=createSetterExpr(this.$$expr);o.call(this.$$vm,this.$$vm.$$owner,this.$$model);for(var s=0;s<r;s++){this.notify({type:"remove",param:{index:t},strictExpr:!0});var p=this.$$expr+"[-1]";c.util.removeSubScriber(this.$$vm,p)}}if(n.length>0){arguments[1]=0;var a=this;Array.prototype.splice.apply(a.$$model,arguments);var o=createSetterExpr(this.$$expr);o.call(this.$$vm,this.$$vm.$$owner,this.$$model),$.each(n,function(e,r){c.defArrayItem(a.$$vm,a.$$expr,t+e,a,a.$$model)}),this.notify({type:"insert",param:{oriLen:t,index:t,newLen:a.$$model.length,element:n},strictExpr:!0})}c.applyVM(e,{})}}}var e=t.document,o=(t.location,{}),s=["this","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],p=function h(){h.prototype.bootstrap.call(t)},a=e.createDocumentFragment();t.OLDIE=t==e&&e!=t,p.prototype={bootstrap:function(){},def:function(t,r){var i={};$.isFunction(r)?r.call(this,i):$.isPlainObject(r)&&(i=r);var n={},o=e.getElementById(t);return this.compileView(o,n,i),this.defObserve(i,n),this.applyVM(n),this.addInputWatch(o),n},applyVM:function(t,e){for(var r=t.$$subscriber.length,i=0;i<r;i++)try{t.$$subscriber[i].$apply(e)}catch(n){console.error(n)}},compileView:function(t,e,r){e.$$subscriber=[],this.compileDom(t,e,r)},compileDom:function(t,e,r,i){for(var n=t.childNodes,o=n.length,s=0;s<o;s++){var p=n[s],a=this.getDefAttr(p),c=e;if(!$.isEmptyObject(a)){var h=this.analyse(p,a,e,r,i);h&&e.$$subscriber.push(h)}p.children&&p.children.length>0&&this.compileDom(p,c,r,i)}},analyse:function(t,e,i,n,s){var p=t.nodeName.toLowerCase(),a=o[p]?o[p]:r;try{return a.call(i,i,t,e,n,s)}catch(c){console&&console.error(p+"analyse fail.")}},addInputWatch:function(t){$(t).on("blur","input",function(t){var e=t.target;e.getAttribute("hi-bind")&&alert($(e).val())})},defObserve:function(t,e){return this.defPuppetObject(e,t,e),e},defPuppetObject:function(t,e,r){t.$$vm=r,t.$$owner=e;for(var i in e)"$"!=i.charAt(0)&&s.indexOf(i)==-1&&this.defPuppetELement(i,e,r,t)},defArrayItem:function(t,e,r,i,n){var o={};o.$$vm=t;var s=n[r];return Object.defineProperty(o,"$$prefix",{get:function(){var t=n.indexOf(s);return e+"["+t+"]"}}),Array.prototype.splice.call(i,r,0,o),this.defPuppetObject(o,n[r],t),o},defArrayItems:function(t,e,r,i){for(var n=0,o=r.length;n<o;n++)this.defArrayItem(t,e,n,i,r)},defPuppetELement:function(t,e,r,i){var o=e[t];if($.isArray(o)){var s=i.$$prefix?i.$$prefix+"."+t:t,p=new n(o,r,s,i),a={get:function(){return p},set:function(i){var o=p;p=new n(i,r,s),c.defArrayItems(r,s,i,p),e[t]=i,c.onPropertyChange(this,t,p,o,{strictExpr:!0,type:"refresh"}),c.applyVM(r,{})}};Object.defineProperty(i,t,a),this.defArrayItems(r,s,o,p)}else if($.isPlainObject(o)){var h={};h.$$vm=r,h.$$prefix=i.$$prefix?i.$$prefix+"."+t:t;var a={get:function(){return h},set:function(n){var o=h;h={},h.$$vm=r,h.$$prefix=i.$$prefix?i.$$prefix+"."+t:t,e[t]=n,c.defPuppetObject(h,n,r),c.onPropertyChange(this,t,h,o,{strictExpr:!1,type:"refresh"}),c.applyVM(r,{})}};Object.defineProperty(i,t,a),this.defPuppetObject(h,o,r)}else $.isFunction(o)||this.defPuppetProperty(i,t)},defPuppetProperty:function(t,e){var r={eleId:e,get:function(){return this.$$owner[e]},set:function(t){var r=this.$$owner[e];if(r!=t){var i=this;i.$$owner[e]=t,c.onPropertyChange(i,e,t,r)}}};Object.defineProperty(t,e,r)},onPropertyChange:function(t,e,r,i,n){var o,s=t.$$prefix?t.$$prefix+"."+e:e;o=n?n:{},o.eleId=e,o.val=r,o.oldVal=i,c.publishPropertyChanged(t.$$vm,s,o)},publishPropertyChanged:function(t,e,r){for(var i=t.$$subscriber,n=i.length,o=!!r.strictExpr,s=0;s<n;s++){var p=i[s].getExpr(),a=o?p===e:p.indexOf(e)!=-1;a&&i[s].$apply(r)}},defComponent:function(t,e){var r=function(t,r,i,n){return e.linker(t,r,i,n)};$.isArray(t)?$.each(t,function(t,e){o[e]=r}):o[t]=r},getDefAttr:function(t){var e={},r=t.attributes;if(r)for(var i=r.length,n=0;n<i;n++){var o=r.item(n);"hi-"==o.name.substring(0,3)&&(e[o.name.substring(3)]=o.value)}return e},util:{getExprFn:function(t){return createGetterExpr(t)},removeSubScriber:function(t,e){for(var r=t.$$subscriber,i=r.length,n=0;n<i;){var o=r[n],s=o.getExpr();s&&s.indexOf(e)!=-1?(r.splice(n,1),i=r.length):n++}}}},t.getBufferFragment=function(){return a.cloneNode(!0)};var c=new p;t.helix=t.hi=c,t.OLDIE&&(Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r=this.length,i=~~e;for(i<0&&(i+=r);i<r;i++)if(this[i]===t)return i;return-1}))}(window,document,void 0)}])});
//# sourceMappingURL=helix.min.js.map