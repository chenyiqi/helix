!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("helix",[],t):"object"==typeof exports?exports.helix=t():e.helix=t()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyVM=t.defComponent=t.def=t.createComponent=t.createElement=void 0;var i=r(8),n=(r(5),r(3),r(4));t.createElement=i.createElement,t.createComponent=i.createComponent,t.def=n.def,t.defComponent=n.defComponent,t.applyVM=n.applyVM},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){var e=[];this.append=function(t){return e.push(t),this},this.toString=function(){return e.join("")}},n=function(e,t){for(var r=e.$$subscriber,i=r.length,n=0;n<i;){var o=r[n],s=o.getExpr();s&&s.indexOf(t)!=-1?(r.splice(n,1),i=r.length):n++}},o={},s="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),p=0;p<s.length;p++){var c=s[p];o["[object "+c+"]"]=c.toLowerCase()}var u=o.hasOwnProperty;Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r=this.length,i=~~t;for(i<0&&(i+=r);i<r;i++)if(this[i]===e)return i;return-1});var a={noop:function(){},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return null!==e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!a.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){if(e&&"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object&&!u.call(e,"constructor")){var t;for(t in e);return void 0===t||u.call(e,t)}return!1},type:function(e){return null==e?e+"":"object"===("undefined"==typeof e?"undefined":r(e))||"function"==typeof e?o[toString.call(e)]||"object":"undefined"==typeof e?"undefined":r(e)},extend:function(){var e,t,i,n,o,s,p=arguments[0]||{},c=1,u=arguments.length,l=!1;for("boolean"==typeof p&&(l=p,p=arguments[c]||{},c++),"object"===("undefined"==typeof p?"undefined":r(p))||a.isFunction(p)||(p={}),c===u&&(p=this,c--);c<u;c++)if(null!=(o=arguments[c]))for(n in o)e=p[n],i=o[n],p!==i&&(l&&i&&(a.isPlainObject(i)||(t=a.isArray(i)))?(t?(t=!1,s=e&&a.isArray(e)?e:[]):s=e&&a.isPlainObject(e)?e:{},p[n]=a.extend(l,s,i)):void 0!==i&&(p[n]=i));return p}};t.StringBuffer=i,t.removeSubScriber=n,t.util=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},i={},n=function(e){if(!r.hasOwnProperty(e)){var t="var $$$rsl = $$$obj."+e+";return $$$rsl;",i=new Function("$$$obj",t);r[e]=i}return r[e]},o=function(e){if(!i.hasOwnProperty(e)){var t="$$$obj."+e+"=$$$val;return;",r=new Function("$$$obj","$$$val",t);i[e]=r}return i[e]},s=function(e){return n(e)};t.createGetterExpr=n,t.createSetterExpr=o,t.getExprFn=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compiler=void 0;var i=r(1),n=r(6),o={compileView:function(e,t,r){t.$$subscriber=[],this.compileDom(e,t,r)},compileDom:function(e,t,r,n){var o=e.childNodes;if(!o)throw new Exception("root dom must have child!");for(var s=o.length,p=0;p<s;p++){var c=o[p],u=c.binds,a=t;if(!i.util.isEmptyObject(u)){var l=this.analyse(c,u,t,r,n);l&&t.$$subscriber.push(l)}c.childNodes&&c.childNodes.length>0&&this.compileDom(c,a,r,n)}},analyse:function(e,t,r,i,o){var s=e.nodeName.toLowerCase(),p=n.$linkers[s]?n.$linkers[s]:n.defaultLinker;return p.call(r,r,e,t,i,o)}};t.compiler=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyVM=t.def=t.defComponent=void 0;var i=r(1),n=r(3),o=r(5),s=r(6),p=function(e,t){var r=function(e,r,i,n){return t.linker(e,r,i,n)};if(i.util.isArray(e)){var n=!0,o=!1,p=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var a=c.value;s.$linkers[a]=r}}catch(l){o=!0,p=l}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw p}}}else s.$linkers[e]=r},c=function(e,t){var r={};i.util.isFunction(t)?t.call(this,r):r=t;var s={};return n.compiler.compileView(e,s,r),o.observe.defObserve(r,s),this.applyVM(s),s},u=function(e,t){for(var r=e.$$subscriber.length,i=0;i<r;i++)try{e.$$subscriber[i].$apply(t)}catch(n){console.error(n)}};t.defComponent=p,t.def=c,t.applyVM=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=void 0;var i=r(1),n=r(7),o=r(4),s=["this","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],p={defObserve:function(e,t){return this.defPuppetObject(t,e,t),t},defPuppetObject:function(e,t,r){e.$$vm=r,e.$$owner=t;for(var i in t)"$"!=i.charAt(0)&&s.indexOf(i)==-1&&this.defPuppetELement(i,t,r,e)},defArrayItem:function(e,t,r,i,n){var o={};o.$$vm=e;var s=n[r];return Object.defineProperty(o,"$$prefix",{get:function(){var e=n.indexOf(s);return t+"["+e+"]"}}),Array.prototype.splice.call(i,r,0,o),this.defPuppetObject(o,n[r],e),o},defArrayItems:function(e,t,r,i){for(var n=0,o=r.length;n<o;n++)this.defArrayItem(e,t,n,i,r)},defPuppetELement:function(e,t,r,s){var c=t[e];if(i.util.isArray(c)){var u=s.$$prefix?s.$$prefix+"."+e:e,a=new n.HArray(c,r,u,s),l={get:function(){return a},set:function(i){var s=a;a=new n.HArray(i,r,u),$observe.defArrayItems(r,u,i,a),t[e]=i,$observe.onPropertyChange(this,e,a,s,{strictExpr:!0,type:"refresh"}),(0,o.applyVM)(r,{})}};Object.defineProperty(s,e,l),this.defArrayItems(r,u,c,a)}else if(i.util.isPlainObject(c)){var f={};f.$$vm=r,f.$$prefix=s.$$prefix?s.$$prefix+"."+e:e;var l={get:function(){return f},set:function(i){var n=f;f={},f.$$vm=r,f.$$prefix=s.$$prefix?s.$$prefix+"."+e:e,t[e]=i,p.defPuppetObject(f,i,r),p.onPropertyChange(this,e,f,n,{strictExpr:!1,type:"refresh"}),(0,o.applyVM)(r,{})}};Object.defineProperty(s,e,l),this.defPuppetObject(f,c,r)}else i.util.isFunction(c)||this.defPuppetProperty(s,e)},defPuppetProperty:function(e,t){var r={eleId:t,get:function(){return this.$$owner[t]},set:function(e){var r=this.$$owner[t];if(r!=e){var i=this;i.$$owner[t]=e,p.onPropertyChange(i,t,e,r)}}};Object.defineProperty(e,t,r)},onPropertyChange:function(e,t,r,i,n){var o,s=e.$$prefix?e.$$prefix+"."+t:t;o=n?n:{},o.eleId=t,o.val=r,o.oldVal=i,p.publishPropertyChanged(e.$$vm,s,o)},publishPropertyChanged:function(e,t,r){for(var i=e.$$subscriber,n=i.length,o=!!r.strictExpr,s=0;s<n;s++){var p=i[s].getExpr(),c=o?p===t:p.indexOf(t)!=-1;c&&i[s].$apply(r)}}};t.observe=p},function(e,t,r){"use strict";function i(e,t,r,i,o){var s=r.text?r.text:r.bind,p=(0,n.getExprFn)(s),c=o,u=(t.nodeName.toLowerCase(),s),a=!1;return c&&c.exprMatch==s.match(/[a-z0-9A-Z_]*/g)[0]&&(a=!0),t.setAttribute("expr",u),{$apply:function(){var r=p.call(null,e);t.setAttribute("text",r)},getFn:function(){return p},getExpr:function(){return a&&(u=s.replace(c.exprMatch,c.prefix)),u}}}Object.defineProperty(t,"__esModule",{value:!0}),t.$linkers=void 0,t.defaultLinker=i;var n=r(2);t.$linkers={}},function(e,t,r){"use strict";function i(e,t,r,i){this.$$vm=t,this.$$prefix=r,this.$$expr=r,this.$$model=e,this._push=Array.prototype.push,this._pop=Array.prototype.pop,this._reverse=Array.prototype.reverse,this._shift=Array.prototype.shift,this._unshift=Array.prototype.unshift,this._splice=Array.prototype.splice,this.join=Array.prototype.join,this.concat=Array.prototype.concat,this.notify=function(e){$helix.publishPropertyChanged(this.$$vm,this.$$expr,e)},this.pop=function(){var e=this.$$model[this.$$model.length-1];return this.splice(this.$$model.length-1,1),e},this.push=function(){var e=this.$$model.length,r=this._push.apply(this.$$model,arguments),i=this;return $.each(arguments,function(t,r){$helix.defArrayItem(i.$$vm,i.$$expr,e+t,i,i.$$model)}),this.notify({type:"push",param:{oriLen:e,newLen:r,element:arguments},strictExpr:!0}),$helix.applyVM(t,{}),r},this.reverse=function(){this.$$model.reverse();var e=(0,n.createSetterExpr)(this.$$expr);e.call(this.$$vm,this.$$vm,this.$$model)},this.shift=function(){var e=this.$$model[this.$$model.length-1];return this.splice(0,1),e},this.unshift=function(e){this.splice(0,0,e)},this.removeAll=function(){this.splice(0,this.$$model.length)},this.addAll=function(){this.splice(0,0,obj)},this.item=function(e,t){return t&&this.splice(e,1,t),this[e]},this.size=function(e){return e&&!isNaN(e)&&this.splice(e,this.$$model.length-e),this.$$model.length},this.splice=function(){var e=arguments[0],r=arguments[1];if(void 0!==r){var i=Array.prototype.slice.call(arguments,2);if(r>0){Array.prototype.splice.call(this,e,r),Array.prototype.splice.call(this.$$model,e,r);var o=(0,n.createSetterExpr)(this.$$expr);o.call(this.$$vm,this.$$vm.$$owner,this.$$model);for(var s=0;s<r;s++){this.notify({type:"remove",param:{index:e},strictExpr:!0});var p=this.$$expr+"[-1]";$helix.util.removeSubScriber(this.$$vm,p)}}if(i.length>0){arguments[1]=0;var c=this;Array.prototype.splice.apply(c.$$model,arguments);var u=(0,n.createSetterExpr)(this.$$expr);u.call(this.$$vm,this.$$vm.$$owner,this.$$model),$.each(i,function(t,r){$helix.defArrayItem(c.$$vm,c.$$expr,e+t,c,c.$$model)}),this.notify({type:"insert",param:{oriLen:e,index:e,newLen:c.$$model.length,element:i},strictExpr:!0})}$helix.applyVM(t,{})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.HArray=i;var n=r(2)},function(e,t){"use strict";function r(e,t,r,i){this.nodeName=e,this.binds=t,this.attributes=r,this.childNodes=i,this.setAttribute=function(e,t){this.attributes||(this.attributes={}),this.attributes[e]=t}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,i,n){return new r(e,t,i,n)},n=function(e,t){};t.createElement=i,t.createComponent=n}])});